(function() {
    var nav = document.querySelector( '.startscreen__nav-list' );
    if (nav) {
        var hammertime = new Hammer(nav, { direction: Hammer.DIRECTION_HORIZONTAL } );
    }

    window.addEventListener( 'load', initMoveNav );

    function initMoveNav() {
        if (nav) {
            moveLeft();
            moveRight();
        }
    }

    function moveLeft() {
        var position = 0;

        hammertime.on('panleft', function() {
            if (nav.style.left) {
                var posirionLeft = nav.style.left;
                var posirionL = posirionLeft.substring(0, posirionLeft.length - 1);
            } else {
                nav.style.left = '0%';
                posirionL = 0;
            }

            if ( (-1) * posirionL < 70  ) {
                nav.style.left = ( (-1) * position)  + '%';
                position++;
            } else {
                position = 0;
            }
        });
    }

    function moveRight() {
        hammertime.on('panright', function() {
            if (nav.style.left) {
                var posirionLeft = nav.style.left;
                var posirionL = posirionLeft.substring(0, posirionLeft.length - 1);
            } else {
                nav.style.left = '0%';
                posirionL = 0;
            }

            if ( posirionL < 0  ) {
                posirionL++;
                nav.style.left = posirionL  + '%';
            } else {
                posirionL = 0;
            }
        });
    }
}());
(function( $, g ) {
    var Accordion = function() {
        this.buttons = $( '.faq__subtitle' );
    };

    Accordion.prototype = {
        init: function() {
            var context = this;

            if ( this.buttons && this.buttons.length > 0 ) {
                this.buttons.on('click', function() {
                    context.eventChange.call( context, $( this ) );
                });
            }
        },

        eventChange: function( button ) {
            button.next( 'div' ).slideToggle( 350 );
        }
    };

    var accordion = new Accordion();

    accordion.init();
}( jQuery, jQuery( window ) ));

(function ($) {
    $(document).ready(function() {
        var buttonMenu = $( '.header__menu' ),
            mobileMenu = $( '.mobile-menu' ),
            timeEffect = 400,
            timeDelay = 300,
            dropdown = '.header__nav-sublist',
            navItemMore = $('.header__nav-item--more'),
            buttonMore = $('.mobile-menu__item--more'),
            mobileList = $('.mobile-menu__sublist');

        slideMenu(buttonMenu, mobileMenu);
        setClassHeader();

        function slideMenu(button, menu) {
            button.on( 'click', function (event) {
                $( menu ).slideToggle( timeEffect );
                event.preventDefault();
            });
        }

        function dropListMenu() {
            navItemMore.on( 'click', function (event) {
                var dropdownList = $(this).children(dropdown);

                $( dropdownList ).toggle( timeEffect );
                event.preventDefault();
            });
        }

        function setClassHeader() {
            var hrefPage = window.location,
                header = $('.header'),
                navLink = $('.header__nav-link'),
                checkHrefPage = /about/i.test(hrefPage) || /contacts/i.test(hrefPage);

            if (checkHrefPage) {
                header.addClass('header--white');
            }

            if (/about/i.test(hrefPage)) {
                navLink.eq(0).addClass('header__nav-link--active');
            } else if (/contacts/i.test(hrefPage)) {
                navLink.eq(2).addClass('header__nav-link--active');
            }
        }
    })
}( jQuery, jQuery( window ) ));


(function ( $ ) {
    $(document).ready(function(){
        function stretchPage() {
            var pageHeight = $( '.page__wrapper' ).outerHeight(),
                headerHeight = $( '.header' ).outerHeight(),
                footerHeight = $( '.footer' ).outerHeight(),
                contacts = $('.contacts'),
                currentHeight = contacts.outerHeight(),
                screenHeight = $( window ).outerHeight(),
                newHeight = screenHeight - headerHeight - footerHeight;

            if (contacts.length > 0) {
                if (screenHeight > pageHeight) {
                    contacts.css( 'height', newHeight );
                } else {
                    contacts.css( 'height', 'auto' );
                }
            }
        }

        $('textarea').autoResize({
            extraSpace : 0,
            limit: 1000
        });

        $( window ).on('load', stretchPage);

        $( window ).on('resize', stretchPage);
    })
}( jQuery, jQuery( window ) ));

(function ( $ ) {
    $(document).ready(function(){
        var loadMain = $( '.form__load' ),
            loadPrint = $('.form-print__load');

        function onloadFile(wrapper) {

            var input = wrapper.find( 'input' ),
                button = wrapper.find( '.load-text' ),

                fileApi = ( window.File && window.FileReader && window.FileList && window.Blob ) ? true : false;

            input.change(function(){
                var fileName;
                if( fileApi && input[ 0 ].files[ 0 ] ) {
                    fileName = input[ 0 ].files[ 0 ].name;
                } else {
                    fileName = input.val().replace( "C:\\fakepath\\", '' );
                }

                if( ! fileName.length ) {
                    return;
                }

                button.text( 'Я приложил файл: ' + fileName );
            });
        }

        onloadFile(loadMain);
        onloadFile(loadPrint);
    });
}( jQuery, jQuery( window ) ));
(function( $, g ) {
    $(document).ready(function(){
        var scroll_button = $( '.scroll-to' );

        if ( scroll_button.length > 0 ) {
            scroll_button.on('click', function( e ) {
                eventScrollTo( $(this), e );

                e.preventDefault();

                return false;
            });
        }

        function scrollTo( target, time ) {
            var body = $( 'html, body' ),
                target = $( target );

            console.log(time);

            if ( target.length > 0 ) {
                body.animate({
                    scrollTop: $( target ).offset().top
                }, time);
            }
        };

        function eventScrollTo( button, e ) {
            var page,
                button = $( button ),
                target = button.attr( 'href' ),
                base = $( 'base' ).attr( 'href' ),
                current_page = location.pathname,
                currentPosition = button.offset().top,
                scrollTime = currentPosition / 3;

            if ( target.substr( 0, 1 ) !== '#' ) {
                base = base.substr( base.indexOf( '/', 10 ) );
                page = base + target.substr( 0, target.lastIndexOf( '/' ) + 1 );

                if ( page !== current_page ) {
                    location.replace( base + target );
                } else {
                    target = target.substr( target.lastIndexOf( '/' ) + 1 );

                    console.log(target);

                    scrollTo( target, scrollTime );
                }
            } else {
               scrollTo( target, scrollTime );
            }

            e.preventDefault();

            return false;
        }
    })
}( jQuery, jQuery( window ) ));

(function ( $ ) {
    $(document).ready(function(){
        var openClass = 'form-print__select--opened',
            buttonSelect = $('.form-print__select'),
            optionSelect = $('.form-print__select-item'),
            droplist = $('.form-print__select-list'),
            timeToggle = 100,
            timeEffect = 300;

        buttonSelect.on('click', function (e) {
            var droplist = $(this).children('.form-print__select-list');

            if(!$(this).hasClass(openClass)){
                $(this).addClass(openClass);
                droplist.slideDown( timeEffect );
            } else {
                $(this).removeClass(openClass);
                droplist.slideUp( timeEffect );
            }
        });

        optionSelect.on('click', function (e) {
            var textOption = $(this).text();
            var currentFieldSelect = $(this).parent().prev('.form-print__select-inner');

            currentFieldSelect.text(textOption);
            currentFieldSelect.addClass('form-print__select-inner--checked');
            e.preventDefault();
        });
    })
}( jQuery, jQuery( window ) ));
